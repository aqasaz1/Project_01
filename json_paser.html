<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<script type="text/javascript" src="./common/jquery-3.6.1.min.js"></script>

<body>
	<a>DOWNLOAD JSON</a>
	<table>
		<tr>
			<th>언어</th>
			<td>
				<select name="" id="con_lan">
					<option value="default" selected>선택</option>
					<option value="영어">영어</option>
					<option value="중국어">중국어</option>
					<option value="일본어">일본어</option>
					<option value="기타외국어">기타외국어</option>
				</select>
			</td>
		</tr>
		<tr><th>과정코드</th>	<td><input type="text" name="" id="con_cod" 	class="non-data" value=""></td></tr>
		<tr><th>과정명</th>		<td><input type="text" name="" id="con_name" 	class="non-data" value=""></td></tr>
		<tr><th>샘플차시</th>	<td><input type="text" name="" id="con_sample"	class="non-data" value="1/21">(Step구분 예: 1/21)</td></tr>
		<tr><th>스텝차시</th>	<td><input type="text" name="" id="con_chasi" 	class="non-data" value="20/20">(Step구분 예: 20/20)</td></tr>
		<tr><th>사이즈</th>		<td><input type="text" name="" id="con_size" 	class="non-data" value="1000*650"></td></tr>
		<tr><th>담당자</th>		<td><input type="text" name="" id="con_cm" 		class="non-data" value=""></td></tr>
	</table>
	<table>
		<tr>
			<th>차시명</th>
			<th>차시명(특수기호제거)</th>
			<th>페이지명</th>
			<th>합본경로</th>
		</tr>
		<tr>
			<td><textarea name="" id="con_data1" class="non-data" cols="29" rows="30"></textarea></td>
			<td><textarea name="" id="con_data2" class="non-data" cols="29" rows="30"></textarea></td>
			<td><textarea name="" id="con_data3" class="non-data" cols="29" rows="30"></textarea></td>
			<td><textarea name="" id="con_bind"  class="non-data" cols="29" rows="30"></textarea></td>
		</tr>
	</table>
	<script>
		$(document).ready(function () {


			$("a").click(function () {
				var mainJson = {}

				mainJson.content_lan 	= $("#con_lan").val()	//언어
				mainJson.content_code 	= $("#con_cod").val()	//과정코드
				mainJson.content_name 	= $("#con_name").val()	//과정명
				mainJson.content_sample	= $("#con_sample").val()//샘플차시
				mainJson.content_chasi	= $("#con_chasi").val()	//스텝차시
				mainJson.content_size	= $("#con_size").val()	//사이즈
				mainJson.content_cm		= $("#con_cm").val()	//담당자
				mainJson.content_data	= []

				var con_data_title_a	= $("#con_data1").val().trim().split("\n")	//차시명
				var con_data_title_b	= $("#con_data2").val().trim().split("\n")	//차시명(특수기호제거)
				var con_data_page_name	= $("#con_data3").val().trim().split("\n")	//메뉴명
				var con_data_bine_path	= $("#con_bind").val().replaceAll("\\","/").trim().split("\n")	//합본

				$.each(con_data_title_a, function (key, val) {
					con_data_page_name_bit = con_data_page_name[key].split("\t")
					mainJson.content_data[key] = {
						"chasi": key + 1,
						"title_a": val,
						"title_b": con_data_title_b[key],
						"page_name": con_data_page_name_bit,
						"mp4_bind_path": con_data_bine_path[key],
						"mp4_bind_time": ""
					}
				})
				console.log(mainJson)

				var data = "text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(mainJson, null, '\t'));
				this.href = 'data:' + data;
				this.download = mainJson.content_code + '.json';
			})

			$("#con_lan").change(function() {
				$(this).val() === "영어" ? $("#con_cm").val("오순정 이선영 신화정") : ""
				$(this).val() === "중국어" ? $("#con_cm").val("서혜린 이은진") : ""
				$(this).val() === "일본어" ? $("#con_cm").val("신재민 변솔기") : ""
				$(this).val() === "기타외국어" ? $("#con_cm").val("정계영") : ""
				$(this).val() === "default" ? $("#con_cm").val("") : ""
			});
			
		});
	</script>
	<style>
		body {
			font-size: 14px;
		}

		a {
			background-color: #F9F9F9;
			border: 1px solid;
			color: #E36626;
			padding: 5px 50px;
			text-align: center;
			text-decoration: none;
			font-weight: bold;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
		}

		a:hover {
			background-color: #1E1E1E;
			font-weight: bold;
		}

		th {
			background-color: #333333;
			color: #FFFFFF;
			font-weight: normal;
			padding: 2px 5px;
		}
	</style>
</body>

</html>