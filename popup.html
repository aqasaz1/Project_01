<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
</head>
<script type="text/javascript" src="./common/jquery-3.6.1.min.js"></script>

<body>

	<script>
		var httpUrl = new URL(window.location.href)
		var params = new URLSearchParams(httpUrl.searchParams)
		
		var html_obj = ''
		
		const nameMap = {
			bind() {
				html_obj += '<textarea name="" id="up_txt" cols="222" rows="23"></textarea>'
				$('body').html(html_obj)
				$("#up_txt").text(opener.bind_path_all());
			},
			firb() {
				html_obj += '<textarea name="" id="up_txt" cols="209" rows="32"></textarea>'
				$('body').html(html_obj)
				$("#up_txt").text(opener.bind_path_firb());
			},
			firb_CA() {
				html_obj += '<textarea name="" id="up_txt" cols="209" rows="32"></textarea>'
				$('body').html(html_obj)
				$("#up_txt").text(opener.bind_path_firb_CA());
			},
			code() {
				html_obj += '<textarea name="" id="up_txt" cols="37" rows="22"></textarea></br>'
				html_obj += '<input type="button" value="update" onclick="opener_update(' + '\'code\'' + ')">'
				$('body').html(html_obj)
				$.each(opener.$('#content_list tr'), function (key, item) {
					$("#up_txt").text($("#up_txt").text()+$(this).attr("class")+"\n")
				});
				//$("#up_txt").text("CODE1111\nCODE2222\n");
			},
			name() {
				html_obj += '<textarea name="" id="up_txt" cols="66" rows="22"></textarea></br>'
				html_obj += '<input type="button" value="update" onclick="opener_update(' + '\'name\'' + ')">'
				$('body').html(html_obj)
				$.each(opener.$('.cp_name input'), function (key, item) {
					$("#up_txt").text($("#up_txt").text()+$(this).val()+"\n")
				});
				//$("#up_txt").text("(rename)나의 첫 영어 명작 읽기 - 셜록 홈즈 (1)\n(rename)나의 첫 영어 명작 읽기 - 셜록 홈즈 (2)\n(rename)미드영어 발음에서 회화까지 (1)\n(rename)미드영어 발음에서 회화까지 (2)\n(rename)미드영어 발음에서 회화까지 (3)\n");
			},
			hunet() {
				html_obj += '휴넷_Index</br><textarea name="" id="up_txt1" cols="108" rows="17"></textarea></br>'
				html_obj += '휴넷_Frame</br><textarea name="" id="up_txt2" cols="108" rows="17"></textarea>'
				$('body').html(html_obj)
				$("#up_txt1").text(opener.hunet_index(params.get('cod')));
				$("#up_txt2").text(opener.hunet_frame(params.get('cod')));
			},
			kg() {
				html_obj += 'KG에듀원</br><textarea name="" id="up_txt" cols="108" rows="36"></textarea></br>'
				$('body').html(html_obj)
				$("#up_txt").text(opener.kg_eduone(params.get('cod')));
			},
			meganext() {
				html_obj += '메가넥스트</br><textarea name="" id="up_txt" cols="108" rows="36"></textarea></br>'
				$('body').html(html_obj)
				$("#up_txt").text(opener.meganext(params.get('cod')));
			}
		}
		

		const thisFn = (thisName) => nameMap[thisName]()
		thisFn(this.name)

		// if (this.name == 'bind') {
		// 	html_obj += '<textarea name="" id="up_txt" cols="109" rows="23"></textarea>'
		// 	$('body').html(html_obj)
		// 	$("#up_txt").text(opener.bind_path_all());
		// } else if (this.name == 'code') {
		// 	html_obj += '<textarea name="" id="up_txt" cols="37" rows="22"></textarea></br>'
		// 	html_obj += '<input type="button" value="update" onclick="opener_update(' + '\'code\'' + ')">'
		// 	$('body').html(html_obj)
		// 	$("#up_txt").text("CODE1111\nCODE2222\nCODE3333\nCODE4444\nCODE5555\n");
		// } else if (this.name == 'name') {
		// 	html_obj += '<textarea name="" id="up_txt" cols="66" rows="22"></textarea></br>'
		// 	html_obj += '<input type="button" value="update" onclick="opener_update(' + '\'name\'' + ')">'
		// 	$('body').html(html_obj)
		// 	$("#up_txt").text("(rename)나의 첫 영어 명작 읽기 - 셜록 홈즈 (1)\n(rename)나의 첫 영어 명작 읽기 - 셜록 홈즈 (2)\n(rename)미드영어 발음에서 회화까지 (1)\n(rename)미드영어 발음에서 회화까지 (2)\n(rename)미드영어 발음에서 회화까지 (3)\n");
		// } else if (this.name == 'hunet') {
		// 	html_obj += '휴넷_Index</br><textarea name="" id="up_txt1" cols="108" rows="17"></textarea></br>'
		// 	html_obj += '휴넷_Frame</br><textarea name="" id="up_txt2" cols="108" rows="17"></textarea>'
		// 	$('body').html(html_obj)
		// 	$("#up_txt1").text(opener.hunet_index(params.get('cod')));
		// 	$("#up_txt2").text(opener.hunet_frame(params.get('cod')));
		// } else if (this.name == 'kg') {
		// 	html_obj += 'KG에듀원</br><textarea name="" id="up_txt" cols="108" rows="36"></textarea></br>'
		// 	$('body').html(html_obj)
		// 	$("#up_txt").text(opener.kg_eduone(params.get('cod')));
		// } else if (this.name == 'meganext') {
		// 	html_obj += '메가넥스트</br><textarea name="" id="up_txt" cols="108" rows="36"></textarea></br>'
		// 	$('body').html(html_obj)
		// 	$("#up_txt").text(opener.meganext(params.get('cod')));
		// }

		function opener_update(type) {
			let this_txt = ""
			if (type == 'code') {
				this_txt = $("#up_txt").val().trim().split("\n")
				// console.log("s", this_txt)
				$.each(opener.$('input[name=cp_code]'), function (key, item) {
					$(this).parent().text(this_txt[key])
				});
				$.each(opener.$('.cp_code'), function (key, item) {
					// console.log(key, item)
					$(this).html('<input type="text" style="width:100px" name="cp_code" value = "' + $(this).text() + '">')
				});
			} else if (type == 'name') {
				this_txt = $("#up_txt").val().trim().split("\n")
				// console.log("s", this_txt)
				$.each(opener.$('input[name=cp_name]'), function (key, item) {
					$(this).parent().text(this_txt[key])
				});
				$.each(opener.$('.cp_name'), function (key, item) {
					// console.log(key, item)
					$(this).html('<input type="text" style="width:290px" name="cp_name" value = "' + $(this).text() + '">')
				});
			}
			opener.json_update()
			self.close()
		}
	</script>
	<style>
		body{font-family:Arial, Helvetica, sans-serif; color:#DCDCAA; background-color: #333333;}
		textarea{font-family:Arial, Helvetica, sans-serif; color:#7BDCFE; background-color: #1E1E1E;}
		input {width: 100%;}
	</style>
</body>

</html>